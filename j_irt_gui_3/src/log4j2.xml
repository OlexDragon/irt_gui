<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
  <Appenders>
    <Console name="STDOUT" target="SYSTEM_OUT">
    	<PatternLayout pattern="%d [%t] %C{2} (%F:%L) %-5p - %m%n"/>
   		<MarkerFilter marker="FileWork" onMatch="DENY" onMismatch="ACCEPT"/>
    </Console>

    <RollingFile name="DumpFile" fileName="${sys:user.home}/irt/${sys:serialNumber}/${sys:serialNumber}.log"
    						  filePattern="${sys:user.home}/irt/${sys:serialNumber}/$${date:yyyy-MM}/${sys:serialNumber}-%d{MM-dd-yyyy}-%i.log.gz"
    						  bufferedIO="false">
		<PatternLayout pattern="%n%d%n %m%n" />
		<Policies>
			<SizeBasedTriggeringPolicy size="500 MB" />
		</Policies>
		<DefaultRolloverStrategy max="10" />
    </RollingFile>

    <RollingFile name="communication" fileName="${sys:user.home}/irt\${sys:serialNumber}/comm_${sys:serialNumber}.log"
    						  			filePattern="${sys:user.home}/irt/${sys:serialNumber}/$${date:yyyy-MM}/comm_${sys:serialNumber}-%d{MM-dd-yyyy}-%i.log.gz"
    						  			bufferedIO="true">
		<PatternLayout pattern="%d %m%n"/>
		<Policies>
			<SizeBasedTriggeringPolicy size="500 MB" />
		</Policies>
		<DefaultRolloverStrategy max="10" />
    </RollingFile>

    <RollingFile name="log" fileName="${sys:user.home}/irt/${sys:serialNumber}/log_${sys:serialNumber}.log"
    					filePattern="${sys:user.home}/irt/${sys:serialNumber}/$${date:yyyy-MM}/log_${sys:serialNumber}-%d{MM-dd-yyyy}-%i.log.gz"
    					bufferedIO="true">
		<PatternLayout pattern="%d %m%n"/>
   		<MarkerFilter marker="FileWork" onMatch="DENY" onMismatch="ACCEPT"/>
		<Policies>
			<SizeBasedTriggeringPolicy size="500 MB" />
		</Policies>
		<DefaultRolloverStrategy max="10" />
    </RollingFile>
  </Appenders>

  <Loggers>
  	<Logger name="irt.controller.serial_port.ComPort" level="debug"/>
 
    <Logger name="dumper" level="INFO">
      <AppenderRef ref="DumpFile" />
    </Logger>

    <Logger name="comPort" level="INFO">
      <AppenderRef ref="communication" />
    </Logger>

    <Root level="WARM">
      <AppenderRef ref="STDOUT"/>
      <AppenderRef ref="log"/>
    </Root>
  </Loggers>
</Configuration>
